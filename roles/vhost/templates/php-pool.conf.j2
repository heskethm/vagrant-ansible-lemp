; {{ ansible_managed }}

; Start a new pool named 'www'.
; the variable $pool can we used in any directive and will be replaced by the
; pool name ('www' here)
[{{ item.deploy_username | default('deploy') }}]

; Unix user/group of processes
user = {{ item.deploy_username | default('deploy') | default('deploy') }}
group = {{ item.deploy_username | default('deploy') | default('deploy') }}

; The address on which to accept FastCGI requests.
listen = /var/run/{{ item.deploy_username | default('deploy') }}.sock
listen.owner = www-data
listen.group = www-data
listen.mode = 0660

; Choose how the process manager will control the number of child processes.
pm = dynamic
pm.max_children = {{ item.php_max_children | default(5) }}
pm.start_servers = {{ item.php_start_servers | default(2) }}
pm.min_spare_servers = {{ item.php_min_spare_servers | default(1) }}
pm.max_spare_servers = {{ item.php_max_spare_servers | default(3) }}

; Chdir to this directory at the start.
; Note: relative path can be used.
; Default Value: current directory or / when chroot
chdir = /
